<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="./tacit-css-1.3.5.min.css" />
    <style type="text/css">
        @font-face {
            font-family: 'fa4';
            src: url('fonts/fa4/fonts/fontawesome-webfont.eot?v=4.7.0');
            src: url('fonts/fa4/fonts/fontawesome-webfont.eot?#iefix&v=4.7.0') format('embedded-opentype'), url('fonts/fa4/fonts/fontawesome-webfont.woff2?v=4.7.0') format('woff2'), url('fonts/fa4/fonts/fontawesome-webfont.woff?v=4.7.0') format('woff'), url('fonts/fa4/fonts/fontawesome-webfont.ttf?v=4.7.0') format('truetype'), url('fonts/fa4/fonts/fontawesome-webfont.svg?v=4.7.0#fontawesomeregular') format('svg');
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: 'fa5b';
            font-style: normal;
            font-weight: normal;
            src: url("fonts/fa5/webfonts/fa-brands-400.eot");
            src: url("fonts/fa5/webfonts/fa-brands-400.eot?#iefix") format("embedded-opentype"), url("fonts/fa5/webfonts/fa-brands-400.woff2") format("woff2"), url("fonts/fa5/webfonts/fa-brands-400.woff") format("woff"), url("fonts/fa5/webfonts/fa-brands-400.ttf") format("truetype"), url("fonts/fa5/webfonts/fa-brands-400.svg#fontawesome") format("svg");
        }

        @font-face {
            font-family: 'fa5s';
            font-style: normal;
            font-weight: 900;
            src: url("fonts/fa5/webfonts/fa-solid-900.eot");
            src: url("fonts/fa5/webfonts/fa-solid-900.eot?#iefix") format("embedded-opentype"), url("fonts/fa5/webfonts/fa-solid-900.woff2") format("woff2"), url("fonts/fa5/webfonts/fa-solid-900.woff") format("woff"), url("fonts/fa5/webfonts/fa-solid-900.ttf") format("truetype"), url("fonts/fa5/webfonts/fa-solid-900.svg#fontawesome") format("svg");
        }

        @font-face {
            font-family: 'fa5r';
            font-style: normal;
            font-weight: 400;
            src: url("fonts/fa5/webfonts/fa-regular-400.eot");
            src: url("fonts/fa5/webfonts/fa-regular-400.eot?#iefix") format("embedded-opentype"), url("fonts/fa5/webfonts/fa-regular-400.woff2") format("woff2"), url("fonts/fa5/webfonts/fa-regular-400.woff") format("woff"), url("fonts/fa5/webfonts/fa-regular-400.ttf") format("truetype"), url("fonts/fa5/webfonts/fa-regular-400.svg#fontawesome") format("svg");
        }

        @font-face {
            font-family: 'capi';
            src: url('fonts/capi/fonts/captainicon.eot?-1i2a56');
            src: url('fonts/capi/fonts/captainicon.eot?#iefix-1i2a56') format('embedded-opentype'),
                url('fonts/capi/fonts/captainicon.woff?-1i2a56') format('woff'),
                url('fonts/capi/fonts/captainicon.ttf?-1i2a56') format('truetype'),
                url('fonts/capi/fonts/captainicon.svg?-1i2a56#captainicon') format('svg');
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: "mad3";
            src: url("fonts/mad3/fonts/materialdesignicons-webfont.eot?v=3.0.39");
            src: url("fonts/mad3/fonts/materialdesignicons-webfont.eot?#iefix&v=3.0.39") format("embedded-opentype"), url("fonts/mad3/fonts/materialdesignicons-webfont.woff2?v=3.0.39") format("woff2"), url("fonts/mad3/fonts/materialdesignicons-webfont.woff?v=3.0.39") format("woff"), url("fonts/mad3/fonts/materialdesignicons-webfont.ttf?v=3.0.39") format("truetype"), url("fonts/mad3/fonts/materialdesignicons-webfont.svg?v=3.0.39#materialdesigniconsregular") format("svg");
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: 'dev1';
            src: url("fonts/dev1/fonts/devicons.eot?xqxft6");
            src: url("fonts/dev1/fonts/devicons.eot?#iefixxqxft6") format("embedded-opentype"), url("fonts/dev1/fonts/devicons.woff?xqxft6") format("woff"), url("fonts/dev1/fonts/devicons.ttf?xqxft6") format("truetype"), url("fonts/dev1/fonts/devicons.svg?xqxft6#devicons") format("svg");
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: 'ow1';
            src: url("fonts/ow1/font/openwebicons.eot");
            src: url("fonts/ow1/font/openwebicons.eot?#iefix") format("embedded-opentype"), url("fonts/ow1/font/openwebicons.woff2") format("woff2"), url("fonts/ow1/font/openwebicons.woff") format("woff"), url("fonts/ow1/font/openwebicons.ttf") format("truetype"), url("fonts/ow1/font/openwebicons.svg#openweb_iconsregular") format("svg");
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: 'oi1';
            src: url('fonts/oi1/font/fonts/open-iconic.eot');
            src: url('fonts/oi1/font/fonts/open-iconic.eot?#iconic-sm') format('embedded-opentype'), url('fonts/oi1/font/fonts/open-iconic.woff') format('woff'), url('fonts/oi1/font/fonts/open-iconic.ttf') format('truetype'), url('fonts/oi1/font/fonts/open-iconic.otf') format('opentype'), url('fonts/oi1/font/fonts/open-iconic.svg#iconic-sm') format('svg');
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: 'batch';
            src: url('fonts/batch/Webfont/batch-icons-webfont.eot');
            src: url('fonts/batch/Webfont/batch-icons-webfont.eot?#iefix') format('embedded-opentype'),
                url('fonts/batch/Webfont/batch-icons-webfont.woff') format('woff'),
                url('fonts/batch/Webfont/babatch-icons-webfontch.ttf') format('truetype'),
                url('fonts/batch/Webfont/batch-icons-webfont.svg#batchregular') format('svg');
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: 'drip2';
            src: url("fonts/drip2/webfont/fonts/dripicons-v2.eot");
            src: url("fonts/drip2/webfont/fonts/dripicons-v2.eot?#iefix") format("embedded-opentype"),
                url("fonts/drip2/webfont/fonts/dripicons-v2.woff") format("woff"),
                url("fonts/drip2/webfont/fonts/dripicons-v2.ttf") format("truetype"),
                url("fonts/drip2/webfont/fonts/dripicons-v2.svg#dripicons-v2") format("svg");
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: 'iw1';
            src: url('fonts/iw1/icon-works-webfont.eot');
            src: url('fonts/iw1/icon-works-webfont.eot?#iefix') format('embedded-opentype'),
                url('fonts/iw1/icon-works-webfont.woff') format('woff'),
                url('fonts/iw1/icon-works-webfont.ttf') format('truetype'),
                url('fonts/iw1/icon-works-webfont.svg#icon-worksregular') format('svg');
            font-weight: normal;
            font-style: normal;
        }

        #main {}

        canvas {
            font-family: FontAwesome;
            border: 1px solid #CCC;
        }

        td {
            vertical-align: middle;
        }

        button {
            background-color: lightgray;
        }

        body {
            padding-left: 1em;
        }

        .glyph-pg,
        .glyph-td {
            cursor: pointer;
        }
    </style>
    <title>Iconic</title>
</head>

<body>
    <section>
        <h1>Rasterize Vector Icons</h1>
        <p>Pick an open icon font:</p>
        <form>
            <select id="font" data-q="f">
                <!-- will be populated by script below -->
            </select><br>
            <h2>Font Information</h2>
            <p id="attributionParagraph"></p>
            <p id="licenseParagraph"></p>
            <p id="courtesyParagraph"></p>
            <p><a id="homepageLink" target="_blank">homepage</a></p>
            <h2>Select Icon</h2>
            <p><a id="browseLink" target="_blank">Browse</a> the font icons.</p>
            <label for="unicode">Unicode:&nbsp;</label><input id="unicode" type="text" size="10" value="" data-q="u"><br>
            <label for="decimal">Decimal:&nbsp;</label><input id="decimal" type="text" size="10" value="" step="16"><br>
            <label for="literal">Literal:&nbsp;</label><input id="literal" type="text" size="10" value=""><br>
            <br>
            <button id="pageUpButton" type="button">Prev Page
                <img class="glyph-pg" width="14" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAD30lEQVRoQ+2aW8iOWRTHfySSRimmaXIxI5NpkpkyymGKSFKUHAopRZPI6WKQJIcLNE1uRAo1EU1cUFIoh5xqMOR4QVFD0bgg0ghF/9oPX5/v2XuvvZ+H19e76u17v961116/vfZx7d2Bdi4d2jkfTcDPPcLNCDYjWN4CXwM/AP2APkBvoCvQEXgOPARuAzfdR/9XLlV3UUGNB5Y6KIvDl4BNwCHgkaWgT7cqwG+B34B5FTkm0D+Af3Pt5QL2AFYDC3MdKSm/BtgIPE21nwM4DDiTWrGh3DNgBKAubJZUwCnAXnNteQXGufFpspICOAHYb6qlOuUxwFGLOSvgx+qWPoafgX9iIS2AWsfuxRquUe8/oH/sUhIL2Ak4CSiCjSAHgYnA65AzsYBzgS0hYxG/TwK6AHsidEMqM4GdIaUYwG+AuyFDEb8PBv52epr2T0SU8amoq/7otnylejGAG4Blmc60hCtMVQG5Aljn8y0E2BO4AXyZAdgWXFWQ94EBwOMy/0KAk4F9NcFVBTkWOJwCKHjBaWJIEV/kWtvL6a47gF+BN2056YtgzuRigcuNpCab78u6qQ9Qi+m1hNClwOVCDgIuWiM4HdhtBMyBy4H8CbhiBbROMDFwnd1YeRVoOOuYnAb8ZQWcAeyKjGAMXDe3uGvMqPFeVAg5H9hsBdwOzI4AtMBprEiUd6kSMimCvwNLAoApcIXJKiG1TCggH4hvFvWNQaURRrfYW5a1Q9Eti8i11qsKMqmL+gA1oNUtfBKCs0RSudRTnuPaKOC4NYK+1IQiqLNh2ToZCxcLqR5w3tOaSevgd8Atj9EySCtcCDIEp/LalOhQYBqDvYDrgZOEIH8BrjrLqXBlkDFwdxzg/1ZA6cecBYsJR/maA0DZhBKx4rxbQmY5p49FFFoLrCrTCx2XhgJnIyr5lCoDfUnhEKC6nAa3bokaUTRHaPyVbv1CgIKaA2xtRDq3VLW5By38jQHsDlxOuA6ru028k4sFULrDXV60bqct9mO2iaZXFpqtVlo8qFF3uZvhg1XEdNHCiBK2pytYBoJOBRS0f9UuK5jVlh0LoPS/cifnnDRiDmAwTdjauBVQ5fu6xwM5jqaU1UFZN0umC6AUwAJSG4CPFUlFbgigvyZJBVQlup/XhcxUU4125T+BRan39DmAhasjgW01rJMXgMXAOXubvC9RBaCs6f5Qh069iMjd1h0B1rsDbpvZagtwVYAt69TLJt0XLDBEVS8o1BV1x6DXT5VJHYAtndM41esnfb4AlBeVvASeAA/cR99rkboBa3HaYrQJaGmtRtRtRrARo2Lxqd1H8C1rnL05qQvpvgAAAABJRU5ErkJggg==">
            </button>
            <span id="glyphSpan"></span>
            <button id="pageDownButton" type="button">Next Page
                <img class="glyph-pg" width="14" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAEB0lEQVRoQ+2ab8iOdxTHP7QmaUqNlrzYRCQho7AXEy0pav4VUl5Iy3/Jn1hrpjZa4oUsZSsspe2FF1Iokn9hWDO82IraFPHCMKlN6FvXlbvbff1+5/yu636ex9N96u65n+7zO+d8fudcv79XFzq5dOnkfLQA3/QMtzLYymBxD/QFhgCDgP5AP6A70BV4AtwF/gRuZB/9X7lUXaKCmgqszaA8AV8BdgCHgfuehiHdqgA/AFYDiysKTKBbgb/K2isL2AvYCCwvG0hB+6+AbcCjVPtlAD8CzqQ6drR7DIwHVMJuSQWcBfzk9lauwZTs+XRZSQH8FDjo8lKd8iTgmMecF7CtyjLEMAq4bIX0AGoe+9tquIl694Ch1qnECvgWcBJQBjuCHAKmA89iwVgBFwHfxYy18e/zgX0xnxbA94FbMUPt8LtKdXi25Ct0bwHcAqxrBwCLy8+Bb0KKMcB3getAH4u3dtC5DQwDHhT5jgHOBH42BK7VhnYGIw26FpWrWeAW3cnAkRRAwQtuRsTLeUBOHgLrga8tUQV0lgI7AVXPcQPoD8BC4EUjm6EMWgYXwX0C/FtjfEMJyBwuN6fFvKYnlWGRaLAZXFSmIUBNpr8HDDeCy9VTIOvhPJCjgUveDM4F9hcA3gRGAHr2isQDWQSX21a5XghsohXLb17A0ACjlYQW3c8jz5sFMgYnFzrmUMUoU41kDnDACzgP+DEAsMS4uglBWuAUggav0HxXaCf0DH4PLIhkaBWw3TBqNoK0wlmqICmD3wJrDMGnQFYJpxA1TSghr0kog9ZJXkatkCo1zZeWhbslczlQUol6AD2QhqLAAyd7E4ET3gymHE1YMxmC9MLJVtI8OBD4w9LddTplIFPg5F6LEm0KXM9gb+Ba4k4iBTIVTosOAT71Akq/zF7QA5kKpxg3AV8WVVpsuzQOOJtQpnkTC2QZOPn5MHQoHAPsAVzMbolSOUOQZeE0Rqg8/0/NoNp9BuxKpcvaNYIsCyfThSuYPN5YBqXXE/g14Tqsvk9qIauACw4uHkDpfpxtPEsmkr1Zh00rawgYk22hgqYsGcwNaLT6ooLAqjChJZ9G+Kh4ALsBpwN7sqizihR0A6xVVvRUW/48gNJ/L9s5t9cxYvSYsL4TvYBqPyA7IqwoIWYzOlzSzZLrAigFMIfUAqCtMqnMjQX01yWpgHKiIz3t62a7PPqV9wArUu/pywDmoU4AdlcwT9aj/wKsBM75++RViyoAZU33h9p06o0IvfxTRo4Cm4FTRafVHuNVAdb61JtNOspf5siq3qBQKeqOQXcclUkzAGuD03Oqt5/0eQd4O/vxP+Af4E720femSLMBmxK0x2gL0NNbHVG3lcGOmBVPTJ0+gy8BeP+2OWn8C7oAAAAASUVORK5CYII="><br>
            </button>
            <br>
            <h2>Style Icon</h2>
            <button type="button" id="glyphButton">Glyph</button>
            <button type="button" id="alignButton">Align</button>
            <hr>
            <div id="glyphDiv" style="display:block;">
                <label for="color">Glyph Color:&nbsp;</label><input id="color" type="text" size="12" value="white"
                    data-q="c"><br>
                <label for="size">Glyph Size:&nbsp;</label><input id="size" type="text" value="64" size="8" data-q="s">&nbsp;
                <button id="decrSize" type="button">-</button><button id="incrSize" type="button">+</button><br>
                <label for="backgroundWidth">Width:&nbsp;</label><input id="backgroundWidth" type="text" value="1" size="8"
                    data-q="bW">&nbsp;
                <button id="decrBackgroundWidth" type="button">-</button><button id="incrBackgroundWidth" type="button">+</button><br>
                <label for="backgroundHeight">Height:&nbsp;</label><input id="backgroundHeight" type="text" value="1"
                    size="8" data-q="bH">&nbsp;
                <button type="button" id="decrBackgroundHeight">-</button><button id="incrBackgroundHeight" type="button">+</button><br>
            </div>
            <div id="alignDiv" style="display:none;">
                <label for="tweakSize">Tweak Size:&nbsp;</label><input id="tweakSize" type="text" value="1" size="8" data-q="tS">&nbsp;
                <button type="button" id="decrTweakSize">-</button><button id="incrTweakSize" type="button">+</button><br>
                <label for="tweakX">Tweak X:&nbsp;</label><input id="tweakX" type="text" value="0" size="8" data-q="tX">&nbsp;
                <button type="button" id="decrTweakX">-</button><button id="incrTweakX" type="button">+</button><br>
                <label for="tweakY">Tweak Y:&nbsp;</label><input id="tweakY" type="text" value="0" size="8" data-q="tY">&nbsp;
                <button type="button" id="decrTweakY">-</button><button id="incrTweakY" type="button">+</button><br>
                <button id="autoCenter" type="button">Auto-Center Glyph on Background</button><br>
            </div>
            <canvas width="400" height="400" id="canvas"></canvas><br>
            <br>
            <label for="resolution">Resolution:&nbsp;</label><input id="resolution" size="6" type="text" value="2x"
                data-q="at">&nbsp;<button id="decrResolution" type="button">-</button><button id="incrResolution" type="button">+</button><br>
            <label for="canvasColor1">Canvas Color 1:&nbsp;</label><input id="canvasColor1" size="10" type="text" value="lightgray"
                data-q="cC1">&nbsp;<button type="button" id="swapCanvasColorButton1">Swap</button><br>
            <label for="canvasColor2">Canvas Color 2:&nbsp;</label><input id="canvasColor2" size="10" type="text" value="gray"
                data-q="cC2">&nbsp;<button type="button" id="swapCanvasColorButton2">Swap</button><br>
            <hr>
            <label for="name">Name:&nbsp;</label><input id="name" size="20" type="text" value="pencil" data-q="n"><br>
            <button type="button" id="generateSingletonButton">Generate Single Icon</button><br>
        </form>
    </section>
    <section id="generatedSingletonSection" style="display:none;">
        <!-- will be populated by script -->
    </section>
    <section id="setSection">
        <hr>
        <p>
            Icon-Set/Texture Definition:<br>
            <textarea id="iconSetSpecTextArea" rows="8" cols="32" style="white-space: nowrap;  overflow: auto;">{}</textarea><br>
            <label for="textureWidth">Texture Width:&nbsp;</label><input id="textureWidth" size="6" type="text" value="512">&nbsp;
            <button id="decrTextureWidth" type="button">-</button><button id="incrTextureWidth" type="button">+</button><br>
            <label for="textureHeight">Texture Height:&nbsp;</label><input id="textureHeight" size="6" type="text" value="0">&nbsp;
            <button id="toggleTextureHeight" type="button">Toggle</button><br>
            <label for="spritePadding">Sprite Padding:&nbsp;</label><input id="spritePadding" size="6" type="text" value="0">&nbsp;
            <button id="decrSpritePadding" type="button">-</button><button id="incrSpritePadding" type="button">+</button><br>
            <label for="mipmapAbility">Mipmap-ability:&nbsp;</label><input id="mipmapAbility" size="6" type="text" value="0">&nbsp;
            <button id="toggleMipmapAbility" type="button">Toggle</button><br>
            <label for="previewBackdropColor">Preview Backdrop:&nbsp;</label><input id="previewBackdropColor" type="text"
                size="12" value="black"><br>
            <button type="button" id="generateIconSetButton">Generate Icon-Set Texture</button><br>
        </p>
    </section>
    <section id="generatedIconSetSection" style="display:none;">
        <!-- will be populated by script -->
    </section>
</body>
<script>
    const cc = `<img width="33" height="33" src="data:image/png;base64,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">`
    const cc_by = `<img width="33" height="33" src="data:image/png;base64,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">`
    const cc_sa = `<img width="33" height="33" src="data:image/png;base64,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">`
    const cc_ab = `<img width="33" height="33" src="data:image/png;base64,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">`
    const cc_mo = `<img width="33" height="33" src="data:image/png;base64,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">`
    const cc_a = `<img width="33" height="33" src="data:image/png;base64,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">`
    const licenseMeta = {
        'SIL OFL 1.1': { url: 'http://scripts.sil.org/OFL', icons: `${cc_by} ${cc_sa} ${cc_a} ${cc_ab} ${cc_mo}` },
        'MIT': { url: 'https://opensource.org/licenses/MIT', icons: `${cc_by}` },
        'CC BY 3.0': { url: 'https://creativecommons.org/licenses/by/3.0/', icons: `${cc} ${cc_by}` },
        'CC BY 4.0': { url: 'https://creativecommons.org/licenses/by/4.0/', icons: `${cc} ${cc_by}` },
        'CC BY-SA': { url: 'https://creativecommons.org/licenses/by-sa/2.0/', icons: `${cc} ${cc_by} ${cc_sa}` },
        "Batch' AS IS": { url: 'http://adamwhitcroft.com/batch/', icons: `${cc_by}` }
    }

    const meta = {
        'fa4': { fullname: 'FontAwesome 4.7.0 (Free)', license: 'SIL OFL 1.1', licenses: { 'Font': 'SIL OFL 1.1', 'Code': 'MIT', 'Docs': 'CC BY 3.0' }, sample: 'f040', homepage: 'https://fontawesome.com/v4.7.0/', browse: 'https://fontawesome.com/v4.7.0/icons/', attribution: 'Font Awesome', courtesy: 'Consider buying a pro license!' },
        'fa5b': { fullname: 'FontAwesome 5.5.0 Brands (Free)', license: 'SIL OFL 1.1', licenses: { 'Webfont': 'SIL OFL 1.1', 'SVG+JS': 'CC BY 4.0', 'Code': 'MIT' }, sample: 'f286', homepage: 'https://fontawesome.com/', browse: 'https://fontawesome.com/icons?d=gallery&s=brands&m=free', attribution: 'Font Awesome', courtesy: 'Consider buying a pro license!' },
        'fa5r': { fullname: 'FontAwesome 5.5.0 Regular (Free)', license: 'SIL OFL 1.1', licenses: { 'Webfont': 'SIL OFL 1.1', 'SVG+JS': 'CC BY 4.0', 'Code': 'MIT' }, sample: 'f044', homepage: 'https://fontawesome.com/', browse: 'https://fontawesome.com/icons?d=gallery&s=regular&m=free', attribution: 'Font Awesome', courtesy: 'Consider buying a pro license!' },
        'fa5s': { fullname: 'FontAwesome 5.5.0 Solid (Free)', license: 'SIL OFL 1.1', licenses: { 'Webfont': 'SIL OFL 1.1', 'SVG+JS': 'CC BY 4.0', 'Code': 'MIT' }, sample: 'f303', homepage: 'https://fontawesome.com/', browse: 'https://fontawesome.com/icons?d=gallery&s=solid&m=free', attribution: 'Font Awesome', courtesy: 'Consider buying a pro license!' },
        'capi': { fullname: 'Captain Icon', license: 'CC BY-SA', licenses: { 'Font': 'CC BY-SA' }, sample: 'e635', homepage: 'http://mariodelvalle.github.io/CaptainIconWeb/', browse: './fonts/capi/demo.html', attribution: 'Captain Icon', courtesy: 'Consider donating!' },
        'mad3': { fullname: 'Material Design Icons 3.0.39', license: 'SIL OFL 1.1', licenses: { 'Font': 'SIL OFL 1.1' }, sample: 'f3eb', homepage: 'https://materialdesignicons.com/', browse: './fonts/mad3/preview.html', attribution: 'Google and the Material Design Icons Community', courtesy: 'Consider buying a pro pack!' },
        'dev1': { fullname: 'DevIcons 1.8.0', license: 'MIT', licenses: { 'Font': 'MIT' }, sample: 'e60e', homepage: 'http://vorillaz.github.io/devicons', browse: 'http://vorillaz.github.io/devicons/#/cheat', attribution: 'Theodore Vorillas et al.', courtesy: 'Consider donating!' },
        'ow1': { fullname: 'OpenWeb Icons 1.6.0', license: 'SIL OFL 1.1', licenses: { 'Font': 'SIL OFL 1.1', 'Site': 'CC BY 4.0' }, sample: 'f016', homepage: 'https://pfefferle.github.io/openwebicons/', browse: 'https://pfefferle.github.io/openwebicons/', attribution: 'Matthias Pfefferle et al.', courtesy: 'Consider using Open Web Standards!' },
        'oi1': { fullname: 'Open Iconic 1.1.1', license: 'MIT', licenses: { 'Icons': 'MIT', 'Font': 'SIL OFL 1.1' }, sample: 'e0a3', homepage: 'https://useiconic.com/open', browse: 'https://useiconic.com/open', attribution: 'Open Iconic', courtesy: 'Consider buying the pro version!' },
        'batch': { fullname: 'Batch by Adam Whitcroft', license: "Batch' AS IS", licenses: { 'Font': "Batch' AS IS" }, sample: 'f139', homepage: 'http://adamwhitcroft.com/batch/', browse: './fonts/batch/Webfont/batch_webfont_reference.pdf', attribution: 'Adam Whitcroft', courtesy: 'Consider buying Adam a cup of coffee!' },
        'drip2': { fullname: 'Drip Icons v2', license: 'CC BY 4.0', licenses: { 'Icons': 'CC BY 4.0', 'Font': 'SIL OFL 1.1' }, sample: 'e02f', homepage: 'http://demo.amitjakhu.com/dripicons/', browse: 'http://demo.amitjakhu.com/dripicons/', attribution: 'Amit Jakhu', courtesy: 'Consider appreciating this project on behance!' },
        'iw1': { fullname: 'Icon Works v1', license: 'SIL OFL 1.1', licenses: { 'Font': 'SIL OFL 1.1' }, sample: '006e', homepage: 'http://icon-works.com/', browse: './fonts/iw1/Glyph-Chart.html', attribution: 'Icon Works', courtesy: 'Consider donating!' },
    }

    const selectFont = document.getElementById("font");

    for (let font in meta) {
        let entry = meta[font]
        let option = document.createElement("option");
        option.setAttribute('value', font)
        let fullname = document.createTextNode(entry.fullname);
        option.appendChild(fullname)
        selectFont.appendChild(option)
    }

    const inputUnicode = document.getElementById("unicode");
    const inputDecimal = document.getElementById("decimal");
    const inputLiteral = document.getElementById("literal");
    const glyphSpan = document.getElementById("glyphSpan");

    const inputSize = document.getElementById("size");
    const incrSize = document.getElementById("incrSize");
    const decrSize = document.getElementById("decrSize");

    const inputColor = document.getElementById("color");
    const inputName = document.getElementById("name");

    const inputBackgroundWidth = document.getElementById("backgroundWidth");
    const inputBackgroundHeight = document.getElementById("backgroundHeight");

    const incrBackgroundWidth = document.getElementById("incrBackgroundWidth");
    const incrBackgroundHeight = document.getElementById("incrBackgroundHeight");

    const decrBackgroundWidth = document.getElementById("decrBackgroundWidth");
    const decrBackgroundHeight = document.getElementById("decrBackgroundHeight");

    const inputTweakSize = document.getElementById("tweakSize");
    const inputTweakX = document.getElementById("tweakX");
    const inputTweakY = document.getElementById("tweakY");

    const incrTweakSize = document.getElementById("incrTweakSize");
    const incrTweakX = document.getElementById("incrTweakX");
    const incrTweakY = document.getElementById("incrTweakY");

    const decrTweakSize = document.getElementById("decrTweakSize");
    const decrTweakX = document.getElementById("decrTweakX");
    const decrTweakY = document.getElementById("decrTweakY");

    const autoCenterButton = document.getElementById("autoCenter");
    let autoCenterX = 0
    let autoCenterY = 0

    const inputCanvasColor1 = document.getElementById("canvasColor1");
    const inputCanvasColor2 = document.getElementById("canvasColor2");
    const swapCanvasColorButton1 = document.getElementById("swapCanvasColorButton1");
    const swapCanvasColorButton2 = document.getElementById("swapCanvasColorButton2");

    const inputResolution = document.getElementById("resolution");
    const incrResolution = document.getElementById("incrResolution");
    const decrResolution = document.getElementById("decrResolution");

    const inputTextureWidth = document.getElementById("textureWidth");
    const incrTextureWidth = document.getElementById("incrTextureWidth");
    const decrTextureWidth = document.getElementById("decrTextureWidth");

    const inputTextureHeight = document.getElementById("textureHeight");
    const toggleTextureHeight = document.getElementById("toggleTextureHeight");

    const inputSpritePadding = document.getElementById("spritePadding");
    const incrSpritePadding = document.getElementById("incrSpritePadding");
    const decrSpritePadding = document.getElementById("decrSpritePadding");

    const inputMipmapAbility = document.getElementById("mipmapAbility");
    const toggleMipmapAbility = document.getElementById("toggleMipmapAbility");

    const inputPreviewBackdropColor = document.getElementById("previewBackdropColor");

    const attributionParagraph = document.getElementById("attributionParagraph");
    const courtesyParagraph = document.getElementById("courtesyParagraph");
    const homepageLink = document.getElementById("homepageLink");
    const licenseParagraph = document.getElementById("licenseParagraph");
    const browseLink = document.getElementById("browseLink");

    const preview1 = document.getElementById("preview1");
    const preview2 = document.getElementById("preview2");
    const preview3 = document.getElementById("preview3");
    const preview4 = document.getElementById("preview4");

    const preview2x1 = document.getElementById("preview2x1");
    const preview2x2 = document.getElementById("preview2x2");
    const preview2x3 = document.getElementById("preview2x3");
    const preview2x4 = document.getElementById("preview2x4");

    const preview4x1 = document.getElementById("preview4x1");
    const preview4x2 = document.getElementById("preview4x2");
    const preview4x3 = document.getElementById("preview4x3");
    const preview4x4 = document.getElementById("preview4x4");

    const iconSetSpecTextArea = document.getElementById("iconSetSpecTextArea")
    //const previewAddToSet = document.getElementById("previewAddToSet");
    //const previewSize = document.getElementById("previewSize");

    const pageUpButton = document.getElementById("pageUpButton");
    const pageDownButton = document.getElementById("pageDownButton");

    const glyphButton = document.getElementById("glyphButton")
    const alignButton = document.getElementById("alignButton")

    const glyphDiv = document.getElementById("glyphDiv")
    const alignDiv = document.getElementById("alignDiv")

    let generateSingletonFlag = false
    const generateSingletonButton = document.getElementById("generateSingletonButton")
    const generatedSingletonSection = document.getElementById("generatedSingletonSection")

    const generateIconSetButton = document.getElementById("generateIconSetButton")
    const generatedIconSetSection = document.getElementById("generatedIconSetSection")

    glyphButton.addEventListener("click", () => {
        glyphDiv.style.display = "block"
        alignDiv.style.display = "none"
    })
    alignButton.addEventListener("click", () => {
        glyphDiv.style.display = "none"
        alignDiv.style.display = "block"
    })

    const inputs = [inputResolution, selectFont, inputUnicode, inputSize, inputColor, inputBackgroundWidth, backgroundHeight, inputTweakSize, inputTweakX, inputTweakY, inputCanvasColor1, inputCanvasColor2];

    function link() {
        return [
            "http://wouterkuijper.com/iconic/index.html",
            inputs.map((element) => {
                return `${element.getAttribute('data-q')}=${encodeURIComponent(element.value)}`
            }).join('&')
        ].join('?')
    }

    const textureInputs = [inputTextureWidth, inputTextureHeight, inputSpritePadding, inputMipmapAbility, inputPreviewBackdropColor];

    function determineBounds(imgData) {

        const cols = imgData.width
        const rows = imgData.height

        const img = imgData.data

        function p(x, y) {
            let s = ((y * cols) + x) * 4
            if (img[s] !== 0 || img[s + 1] !== 0 || img[s + 2] !== 0 || img[s + 3] !== 0) {
                return true
            }
            return false
        }

        let top = -1
        let bot = -1
        let left = -1
        let right = -1
        // determine top
        for (let y = 0; y < rows; y++) {
            for (let x = 0; x < cols; x++) {
                if (p(x, y)) {
                    top = y
                    break
                }
            }
            if (top >= 0) {
                break
            }
        }
        // is the sprite empty?
        if (top < 0) {
            top = bot = rows / 2
            left = right = cols / 2
        } else {
            // determine bottom
            for (let y = rows - 1; y >= 0; y--) {
                for (let x = 0; x < cols; x++) {
                    if (p(x, y)) {
                        bot = y
                        break
                    }
                }
                if (bot >= 0) {
                    break
                }
            }
            // determine left
            for (let x = 0; x < cols; x++) {
                for (let y = 0; y < rows; y++) {
                    if (p(x, y)) {
                        left = x
                        break
                    }
                }
                if (left >= 0) {
                    break
                }
            }
            // determine right
            for (let x = cols - 1; x >= 0; x--) {
                for (let y = 0; y < rows; y++) {
                    if (p(x, y)) {
                        right = x
                        break
                    }
                }
                if (right >= 0) {
                    break
                }
            }
        }
        return [left, top, right+1, bot+1]
    }

    function createIconCanvas(param, at) {

        const halfWidth = Math.round(((param.size * at) / 2) * param.backgroundWidth)
        const halfHeight = Math.round(((param.size * at) / 2) * param.backgroundHeight)

        const width = halfWidth * 2
        const height = halfHeight * 2

        const glyphX = Math.round(halfWidth + (param.tweakX * param.size * at))
        const glyphY = Math.round(halfHeight + (param.tweakY * param.size * at))

        const canvas = document.createElement('canvas')

        canvas.width = width
        canvas.height = height

        const glyphCtx = canvas.getContext("2d")

        glyphCtx.font = `${param.tweakSize * param.size * at}px ${param.font}`
        glyphCtx.textAlign = "center"
        glyphCtx.textBaseline = "middle"

        glyphCtx.fillStyle = param.color

        const char = String.fromCharCode(param.unicode)
        glyphCtx.fillText(char, glyphX, glyphY);

        return [halfWidth, halfHeight, canvas]
    }

    const backdropCanvas = document.createElement("canvas")
    backdropCanvas.width = 400
    backdropCanvas.height = 400

    function redrawBackdrop() {
        const canvasColor1 = inputCanvasColor1.value
        const canvasColor2 = inputCanvasColor2.value
        const backdropCtx = backdropCanvas.getContext("2d")

        backdropCtx.clearRect(0, 0, 400, 600)

        for (let x = 0; x < 200; x++) {
            for (let y = 0; y < 200; y++) {
                if (x % 2 == y % 2) {
                    backdropCtx.fillStyle = canvasColor1
                } else {
                    backdropCtx.fillStyle = canvasColor2
                }
                backdropCtx.fillRect(x * 2, y * 2, 2, 2)
            }
        }
    }
    redrawBackdrop()

    const canvas = document.getElementById("canvas")
    const ctx = canvas.getContext("2d")

    function redraw() {

        const at = getResolution();

        const canvasColor1 = inputCanvasColor1.value
        const canvasColor2 = inputCanvasColor2.value

        ctx.clearRect(0, 0, 400, 600)
        ctx.drawImage(backdropCanvas, 0, 0)

        const param = {
            size: parseFloat(inputSize.value),
            tweakSize: parseFloat(inputTweakSize.value),
            font: selectFont.value,
            unicode: parseInt(`0x${inputUnicode.value}`),
            color: inputColor.value,
            backgroundWidth: parseFloat(inputBackgroundWidth.value),
            backgroundHeight: parseFloat(inputBackgroundHeight.value),
            tweakX: parseFloat(inputTweakX.value),
            tweakY: parseFloat(inputTweakY.value)
        }

        //

        let [halfWidth, halfHeight, iconCanvas] = createIconCanvas(param, at)

        const width = 2 * halfWidth
        const height = 2 * halfHeight

        const maxTile = 4
        const tile = maxTile / at
        const imgData = iconCanvas.getContext("2d").getImageData(0, 0, width, height)
        const img = imgData.data

        const x0 = 200 - (halfWidth * tile)
        const y0 = 200 - (halfHeight * tile)

        for (let y = 0; y < height; y++) {
            for (let x = 0; x < width; x++) {
                const o = (y * width + x) * 4
                const [r, g, b, a] = [img[o], img[o + 1], img[o + 2], img[o + 3]]
                ctx.fillStyle = `rgba(${r},${g},${b},${a / 255})`
                ctx.fillRect(x0 + x * tile, y0 + y * tile, tile, tile)
            }
        }

        ctx.strokeStyle = "red"
        ctx.strokeRect(x0 - .5, y0 - .5, width * tile + 1, height * tile + 1)
        ctx.setLineDash([4,4])
        ctx.beginPath()
        ctx.moveTo(x0 - .5, y0 + halfHeight * tile)
        ctx.lineTo(x0 + width * tile + 1, y0 + halfHeight * tile)
        ctx.stroke()
        ctx.beginPath()
        ctx.moveTo(x0 + halfWidth * tile, y0 - .5)
        ctx.lineTo(x0 + halfWidth * tile, y0 + height * tile + 1)
        ctx.stroke()
        ctx.setLineDash([]);

        ctx.fillStyle = "red"
        ctx.font = "18px sans-serif"
        ctx.textAlign = "center"
        ctx.textBaseline = "bottom"
        ctx.fillText(`${width}`, Math.round(x0 + halfWidth * tile), y0 - 8)
        ctx.textAlign = "left"
        ctx.textBaseline = "middle"
        ctx.fillText(`${height}`, Math.round(x0 + width * tile) + 8, Math.round(y0 + halfHeight * tile))

        const [left1, top1, right1, bot1] = determineBounds(imgData)

        const dx = param.tweakX * param.size * at
        const dy = param.tweakY * param.size * at

        autoCenterX = Math.round(dx + ((Math.abs(left1 - halfWidth) - (right1 - halfWidth)) / 2)) / (param.size * at)
        autoCenterY = Math.round(dy + ((Math.abs(top1 - halfHeight) - (bot1 - halfHeight)) / 2)) / (param.size * at)

        ctx.strokeStyle = "green"
        ctx.strokeRect(x0 + left1 * tile - .5, y0 + top1 * tile - .5, (right1 - left1) * tile, (bot1 - top1) * tile + 1)

        ctx.fillStyle = "green"
        ctx.font = "18px sans-serif"
        ctx.textAlign = "left"
        ctx.textBaseline = "middle"
        ctx.fillText(`${left1}`, x0 + left1 * tile - .5 + 2, y0 + ((top1 + bot1)/2) * tile - .5)
        ctx.textAlign = "right"
        ctx.textBaseline = "middle"
        ctx.fillText(`${width - right1}`, x0 + left1 * tile - .5 + (right1 - left1) * tile - 2, y0 + ((top1 + bot1)/2) * tile - .5)
        ctx.textAlign = "center"
        ctx.textBaseline = "top"
        ctx.fillText(`${top1}`, x0 + ((left1+right1)/2) * tile - .5, y0 + top1 * tile - .5 + 2)
        ctx.textAlign = "center"
        ctx.textBaseline = "bottom"
        ctx.fillText(`${height - bot1}`, x0 + ((left1+right1)/2) * tile - .5, y0 + top1 * tile - .5 + (bot1 - top1) * tile + 1 - 2)
        if (dx !== 0 || dy !== 0) {
        ctx.textAlign = "center"
        ctx.textBaseline = "middle"
            ctx.fillText(`${dx > 0 ? `+${dx}` : `${dx}`}, ${dy > 0 ? `+${dy}` : `${dy}`}`, x0 + ((left1+right1)/2) * tile - .5, y0 + ((top1 + bot1)/2) * tile - .5)
        }

        const [hw1, hh1, ic1] = createIconCanvas(param, 1)
        const [hw2, hh2, ic2] = createIconCanvas(param, 2)
        const [hw4, hh4, ic4] = createIconCanvas(param, 4)

        if (!generateSingletonFlag) {
            return
        }

        const name = inputName.value
        const font = selectFont.value
        const fontInfo = meta[font]

        const dataURL = ic1.toDataURL()
        const dataURL2 = ic2.toDataURL()
        const dataURL4 = ic4.toDataURL()

        generatedSingletonSection.innerHTML =
            `<h2>Images</h2>

<p>Save: ${name}.png<br>
    <img src="${dataURL}" width="${ic1.width}" height="${ic1.height}" style="background-color: white;">
    <img src="${dataURL}" width="${ic1.width}" height="${ic1.height}" style="background-color: ${canvasColor1};">
    <img src="${dataURL}" width="${ic1.width}" height="${ic1.height}" style="background-color: ${canvasColor2};">
    <img src="${dataURL}" width="${ic1.width}" height="${ic1.height}" style="background-color: black;"></p>

<p>Save: ${name}@2x.png<br>
    <img src="${dataURL2}" width="${ic1.width}" height="${ic1.height}" style="background-color: white;">
    <img src="${dataURL2}" width="${ic1.width}" height="${ic1.height}" style="background-color: ${canvasColor1};">
    <img src="${dataURL2}" width="${ic1.width}" height="${ic1.height}" style="background-color: ${canvasColor2};">
    <img src="${dataURL2}" width="${ic1.width}" height="${ic1.height}" style="background-color: black;"></p>

<p>Save: ${name}@4x.png<br>
    <img src="${dataURL4}" width="${ic1.width}" height="${ic1.height}" style="background-color: white;">
    <img src="${dataURL4}" width="${ic1.width}" height="${ic1.height}" style="background-color: ${canvasColor1};">
    <img src="${dataURL4}" width="${ic1.width}" height="${ic1.height}" style="background-color: ${canvasColor2};">
    <img src="${dataURL4}" width="${ic1.width}" height="${ic1.height}" style="background-color: black;"></p>

<h2>JSON</h2>

<pre id="jsResult">
{
    "font": {
        "name": "${fontInfo.fullname}",
        "creator": "${fontInfo.attribution}",
        "homepage": "${fontInfo.homepage}", 
        "license": "This icon is licensed under: ${fontInfo.license} (${licenseMeta[fontInfo.license].url})"
    }
    "width": ${ic1.width},
    "height": ${ic1.height},
    "generator": "${link()}"
}
</pre>

<button type="button" onclick="addCurrentIconToIconSet()">Add To Icon-Set</button><button type="button" onclick="addCurrentIconToIconSetWithRowBreak()">Add With Row-Break</button>`

        currentIconName = name
        currentIconParam = param

        generatedSingletonSection.style.display = "block"

        generateSingletonFlag = false
    }

    let currentIconName
    let currentIconParam

    function addCurrentIconToIconSetWithRowBreak() {
        addCurrentIconToIconSet(true)
    }

    function addCurrentIconToIconSet(rowBreak = false) {
        updateSpecTextField(true, rowBreak)
    }

    function updateSpecInputFields() {
        currSpec = JSON.parse(iconSetSpecTextArea.value)

        if (!currSpec.hasOwnProperty("textureSpec")) {
            throw "no textureSpec found";
        }

        const currTextureSpec =  currSpec["textureSpec"];

        inputTextureWidth.value = `${currTextureSpec["textureWidth"]}`
        inputTextureHeight.value = `${currTextureSpec["textureHeight"]}`
        inputSpritePadding.value = `${currTextureSpec["spritePadding"]}`
        inputMipmapAbility.value = `${currTextureSpec["mipmapAbility"]}`
        inputPreviewBackdropColor.value = `${currTextureSpec["previewBackdrop"]}`
    }

    function updateSpecTextField(addIcon = false, rowBreak = false) {
        if (addIcon && (!currentIconName || !currentIconParam)) {
            return
        }

        currSpec = JSON.parse(iconSetSpecTextArea.value)
        
        const currIconSetSpec = currSpec.hasOwnProperty("iconSetSpec") ? currSpec["iconSetSpec"] : [];
        const currTextureSpec = currSpec.hasOwnProperty("textureSpec") ? currSpec["textureSpec"] : {};

        const newItem = {} 
        if (addIcon) {
            newItem["name"] = currentIconName
            newItem["br"] = rowBreak
            newItem["param"] = currentIconParam
        }

        const lines = []
        let emitted = false
        for (item of currIconSetSpec) {
            if (addIcon && !emitted && item.name === newItem.name) {
                lines.push(`            ${JSON.stringify(newItem)}`)
                emitted = true
            } else {
                lines.push(`            ${JSON.stringify(item)}`)
            }
        }
        if (addIcon && !emitted) {
            lines.push(`            ${JSON.stringify(newItem)}`)
        }

        const textureSpec = {
            textureWidth: parseInt(inputTextureWidth.value),
            textureHeight: parseInt(inputTextureHeight.value),
            spritePadding: parseInt(inputSpritePadding.value),
            mipmapAbility: parseInt(inputMipmapAbility.value),
            previewBackdrop: inputPreviewBackdropColor.value
        }

        iconSetSpecTextArea.value = `{\n    "iconSetSpec": [${lines.length > 0 ? '\n' : ''}${lines.join(",\n")}],\n    "textureSpec": ${JSON.stringify(textureSpec)}\n}`;
    }

    function fillIconInputFields(param) {
        inputSize.value = param.size.toString(10)
        inputTweakSize.value = param.tweakSize.toString(10)
        selectFont.value = param.font
        inputUnicode.value = param.unicode.toString(16)
        inputColor.value = param.color
        inputBackgroundWidth.value = param.backgroundWidth.toString(10)
        inputBackgroundHeight.value = param.backgroundHeight.toString(10)
        inputTweakX.value = param.tweakX.toString(10)
        inputTweakY.value = param.tweakY.toString(10)
        requestAnimationFrame(redraw)
    }

    function generateIconSetTexture() {
        const fullSpec = JSON.parse(iconSetSpecTextArea.value)
        const iconSetSpec = fullSpec["iconSetSpec"];
        const textureWidth = parseInt(inputTextureWidth.value)
        let textureHeight = parseInt(inputTextureHeight.value)
        const spritePadding = parseInt(inputSpritePadding.value)
        const mipmapAbility = parseInt(inputMipmapAbility.value)
        let x = spritePadding
        let y = spritePadding
        let rowHeight = 0
        let rowCount = 0
        const atlas = {}
        const fontIcons = {}
        for (font in meta) {
            fontIcons[font] = []
        }
        function newLine() {
            x = spritePadding
            y += rowHeight
            while(y % mipmapAbility > 0) {
                y++;
            }
            rowHeight = 0
            rowCount = 0
        }
        for (spec of iconSetSpec) {
            const param = spec.param
            fontIcons[param.font].push(spec.name)
            const iconWidth = Math.round(((param.size * 1) / 2) * param.backgroundWidth) * 2 
            const iconHeight = Math.round(((param.size * 1) / 2) * param.backgroundHeight) * 2 
            if (x + iconWidth + spritePadding > textureWidth) {
                if (rowCount === 0) {
                    throw (`icon too wide for texture: ${spec.name}: ${width} > ${textureWidth}`)
                }
                newLine();
            }
            if (textureHeight > 0 && y + iconHeight + spritePadding > textureHeight) {
                throw (`icons too hight for texture`)
            }
            if (iconHeight + spritePadding > rowHeight) {
                rowHeight = iconHeight + spritePadding
            }
            atlas[spec.name] = [x, y, iconWidth, iconHeight]
            if (spec.br) {
                newLine();
            } else {
                x += iconWidth + spritePadding
                while (x % mipmapAbility > 0) {
                    x++;
                }
                rowCount++
            }
        }
        if (textureHeight <= 0) {
            textureHeight = y + rowHeight
        }
        generatedIconSetSection.innerHTML = "<h2>Texture Images</h2>";
        [1, 2, 4].forEach((at) => {
            const textureCanvas = document.createElement("canvas")
            textureCanvas.width = textureWidth*at
            textureCanvas.height = textureHeight*at
            const textureCtx = textureCanvas.getContext("2d")
            x = spritePadding
            y = spritePadding
            rowHeight = 0
            rowCount = 0
            for (spec of iconSetSpec) {
                const param = spec.param
                const iconWidth = Math.round(((param.size * 1) / 2) * param.backgroundWidth) * 2
                const iconHeight = Math.round(((param.size * 1) / 2) * param.backgroundHeight) * 2
                if (x + iconWidth + spritePadding > textureWidth) {
                    if (rowCount === 0) {
                        throw (`icon too wide for texture: ${spec.name}: ${width} > ${textureWidth}`)
                    }
                    x = spritePadding
                    y += rowHeight
                    rowHeight = 0
                    rowCount = 0
                }
                if (iconHeight + spritePadding > rowHeight) {
                    rowHeight = iconHeight + spritePadding
                }
                const [ihw, ihh, iconCanvas] = createIconCanvas(param, at)
                textureCtx.drawImage(iconCanvas, x*at, y*at)
                if (spec.br) {
                    x = spritePadding
                    y += rowHeight
                    rowHeight = 0
                    rowCount = 0
                } else {
                    x += iconWidth + spritePadding
                    rowCount++
                }
            }
            const backdropColor = inputPreviewBackdropColor.value
            const dataURL = textureCanvas.toDataURL()
            const div = document.createElement("div")
            div.innerHTML =
                `<p>Save: icons${at === 1 ? "" : at === 2 ? "@2x" : "@4x"}.png<br>
    <img id="textureImg${at}" src="${dataURL}" width="${textureWidth}" height="${textureHeight}" style="background-color: ${backdropColor};">
</p>`
            generatedIconSetSection.appendChild(div)

            const img = document.getElementById(`textureImg${at}`);
            img.addEventListener("click", (e) => {
                let x = e.pageX - img.offsetLeft;
                let y = e.pageY - img.offsetTop;
                for (name in atlas) {
                    let [tx, ty, tw, th] = atlas[name];
                    if (x >= tx && x < tx + tw && y >= ty && y < ty + th) {
                        for (spec of iconSetSpec) {
                            if (spec.name === name) {
                                fillIconInputFields(spec.param)
                                window.scrollTo(0,2000)
                            }
                        }
                    }
                }
            })
        })

        const h2 = document.createElement("h2")
        h2.innerHTML = `Texture Meta`
        generatedIconSetSection.appendChild(h2)

        const fontMetaItems = []
        for(font in fontIcons) {
            const icons = fontIcons[font]
            if (icons.length === 0) {
                continue
            }
            const fontInfo = meta[font]
            fontMetaItems.push(`            "${font}": {
                "name": "${fontInfo.fullname}",
                "creator": "${fontInfo.attribution}",
                "homepage": "${fontInfo.homepage}", 
                "icons": ${JSON.stringify(icons)},
                "license": "These icons are licensed under: ${fontInfo.license} (${licenseMeta[fontInfo.license].url})"
            }`)
        }

        const metaDiv = document.createElement("div")
        metaDiv.innerHTML = `<p>Save: icons.json<br>
<pre>{
    "info": {
        "fonts": {
${fontMetaItems.join(",\n")}
        },
        "generator": {
            "url": "http://wouterkuijper.com/iconic",
            "definition": ${JSON.stringify(fullSpec)}
        }
    },
    "atlas": ${JSON.stringify(atlas)}
}</pre>`
        generatedIconSetSection.appendChild(metaDiv)

        generatedIconSetSection.style.display = "block"
    }

    const url = window.location.href;
    function getParameterByName(name, defaultValue) {
        var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
            results = regex.exec(url);
        if (!results) return defaultValue;
        if (!results[2]) return defaultValue;
        return decodeURIComponent(results[2].replace(/\+/g, ' '));
    }

    function setUnicode(u) {
        inputUnicode.value = u
        n = parseInt(u, 16)
        inputDecimal.value = n.toString(10)
        inputLiteral.value = String.fromCharCode(n)
        font = selectFont.value
        inputLiteral.style = `font-family:${font};`
        updateGlyphTable(font)
        requestAnimationFrame(redraw)
    }

    function updateGlyphTable(font) {
        let hexCode = inputUnicode.value
        if (hexCode.length < 3) {
            return
        }
        let indices0 = []
        let indices8 = []
        let cols0 = []
        let cols8 = []
        let hexPage = hexCode.substring(0, 3)
        for (let c = 0; c < 16; c++) {
            let d = String.fromCharCode('0'.charCodeAt(0) + c)
            if (c >= 10) {
                d = String.fromCharCode('a'.charCodeAt(0) + (c - 10))
            }
            let currHexCode = hexPage + d
            if (currHexCode == hexCode) {
                indexCell = `<td class="glyph-td" data-u="${currHexCode}"><u>${d}</u></td>`
            } else {
                indexCell = `<td class="glyph-td" data-u="${currHexCode}">${d}</td>`
            }
            glyphCell = `<td class="glyph-td" data-u="${currHexCode}" style="font-family:${font};font-size:20px;">&#x${currHexCode};</td>`
            if (c < 8) {
                indices0.push(indexCell)
                cols0.push(glyphCell)
            } else {
                indices8.push(indexCell)
                cols8.push(glyphCell)
            }
        }
        glyphSpan.innerHTML = `<table><tr><td colspan="8">${hexPage}_</td></tr><tr>${indices0.join('')}</tr><tr>${cols0.join('')}</tr><tr><td colspan="16">${hexPage}_</td></tr><tr>${indices8.join('')}</tr><tr>${cols8.join('')}</tr></table>`
        let tds = document.getElementsByClassName("glyph-td")
        for (let i = 0; i < tds.length; i++) {
            tds[i].addEventListener("click", () => {
                setUnicode(tds[i].getAttribute("data-u"))
            })
        }
    }

    function updateFont(unicode) {
        let font = selectFont.value
        let entry = meta[font]
        attributionParagraph.innerHTML = `Creator: ${entry.attribution}`
        homepageLink.innerHTML = entry.homepage
        homepageLink.setAttribute('href', entry.homepage)
        courtesyParagraph.innerHTML = entry.courtesy
        browseLink.setAttribute('href', entry.browse)
        if (!unicode) {
            unicode = entry.sample
        }
        setUnicode(unicode)
        function genLicenseTableRow(thing, license, info) {
            return `<tr><td>${thing}</td><td><a href="${info.url}">${license}</a></td><td>${info.icons}</td></tr>`
        }
        function genLicenseTable(licenses) {
            let rows = []
            for (thing in licenses) {
                license = licenses[thing]
                licenseInfo = licenseMeta[license]
                rows.push(genLicenseTableRow(thing, license, licenseInfo))
            }
            return `<table><tr><td colspan=3>Free License(s)</td></tr>${rows.join('')}</table>`
        }
        licenseParagraph.innerHTML = genLicenseTable(entry.licenses)
        setTimeout(function () {
            requestAnimationFrame(redraw)
        }, 100)
        setTimeout(function () {
            requestAnimationFrame(redraw)
        }, 250)
        // redraw repeatedly for 10 secs, should be enough to load the fonts
        for (let future = 500; future < 10000; future += 500) {
            setTimeout(() => { requestAnimationFrame(redraw) }, future)
        }
    }

    // attach event listener for font selection
    selectFont.addEventListener('input', () => {
        updateFont()
    })

    // attach event listener for literal glyph input
    inputLiteral.addEventListener('input', () => {
        let s = inputLiteral.value
        if (!s || s.length < 1) {
            return
        }
        if (s.length > 1) {
            s = s[s.length - 1]
            inputLiteral.value = s
        }
        hex = ("000" + s.charCodeAt(0).toString(16)).slice(-4);
        setUnicode(hex)
    })

    inputDecimal.addEventListener('input', () => {
        hex = ("000" + parseInt(inputDecimal.value).toString(16)).slice(-4);
        setUnicode(hex)
    })

    inputUnicode.addEventListener('input', () => {
        setUnicode(inputUnicode.value)
    })

    pageUpButton.addEventListener('click', () => {
        setUnicode((parseInt(inputUnicode.value, 16) - 16).toString(16))
    })

    pageDownButton.addEventListener('click', () => {
        setUnicode((parseInt(inputUnicode.value, 16) + 16).toString(16))
    })

    // attach event listener for buttons

    generateIconSetButton.addEventListener("click", () => {
        generateIconSetTexture()
    })

    generateSingletonButton.addEventListener("click", () => {
        generateSingletonFlag = true
        requestAnimationFrame(redraw)
    })

    autoCenterButton.addEventListener("click", () => {
        inputTweakX.value = autoCenterX.toString(10)
        inputTweakY.value = autoCenterY.toString(10)
        requestAnimationFrame(redraw)
    })

    incrSize.addEventListener("click", () => {
        let size = parseFloat(inputSize.value)
        size = Math.min(Math.floor(size / 2 + 1) * 2, 128)
        inputSize.value = size.toString(10)
        requestAnimationFrame(redraw)
    })
    decrSize.addEventListener("click", () => {
        let size = parseFloat(inputSize.value)
        size = Math.max(Math.ceil(size / 2 - 1) * 2, 8)
        inputSize.value = size.toString(10)
        requestAnimationFrame(redraw)
    })

    incrBackgroundWidth.addEventListener("click", () => {
        let size = parseFloat(inputSize.value)
        let widthRatio = parseFloat(inputBackgroundWidth.value)
        let width = size * widthRatio
        width = Math.min((Math.floor(width / 2) * 2) + 2, 128)
        widthRatio = width / size
        inputBackgroundWidth.value = widthRatio.toString(10)
        requestAnimationFrame(redraw)
    })
    decrBackgroundWidth.addEventListener("click", () => {
        let size = parseFloat(inputSize.value)
        let widthRatio = parseFloat(inputBackgroundWidth.value)
        let width = size * widthRatio
        width = Math.max((Math.ceil(width / 2) * 2) - 2, 8)
        widthRatio = width / size
        inputBackgroundWidth.value = widthRatio.toString(10)
        requestAnimationFrame(redraw)
    })

    incrBackgroundHeight.addEventListener("click", () => {
        let size = parseFloat(inputSize.value)
        let heightRatio = parseFloat(inputBackgroundHeight.value)
        let height = size * heightRatio
        height = Math.min((Math.floor(height / 2) * 2) + 2, 128)
        heightRatio = height / size
        inputBackgroundHeight.value = heightRatio.toString(10)
        requestAnimationFrame(redraw)
    })
    decrBackgroundHeight.addEventListener("click", () => {
        let size = parseFloat(inputSize.value)
        let heightRatio = parseFloat(inputBackgroundHeight.value)
        let height = size * heightRatio
        height = Math.max((Math.ceil(height / 2) * 2) - 2, 8)
        heightRatio = height / size
        inputBackgroundHeight.value = heightRatio.toString(10)
        requestAnimationFrame(redraw)
    })

    incrTweakSize.addEventListener("click", () => {
        let size = parseFloat(inputSize.value)
        let at = getResolution()
        let tweakSizeRatio = parseFloat(inputTweakSize.value)
        let tweakedSize = size * at * tweakSizeRatio
        tweakedSize = Math.floor(tweakedSize) + 1
        tweakSizeRatio = tweakedSize / (size * at)
        inputTweakSize.value = tweakSizeRatio.toString(10)
        requestAnimationFrame(redraw)
    })
    decrTweakSize.addEventListener("click", () => {
        let size = parseFloat(inputSize.value)
        let at = getResolution()
        let tweakSizeRatio = parseFloat(inputTweakSize.value)
        let tweakedSize = size * at * tweakSizeRatio
        tweakedSize = Math.ceil(tweakedSize) - 1
        tweakSizeRatio = tweakedSize / (size * at)
        inputTweakSize.value = tweakSizeRatio.toString(10)
        requestAnimationFrame(redraw)
    })

    incrTweakX.addEventListener("click", () => {
        let size = parseFloat(inputSize.value)
        let at = getResolution()
        let tweakXRatio = parseFloat(inputTweakX.value)
        let tweakX = size * at * tweakXRatio
        tweakX = Math.min(Math.floor(tweakX) + 1, at * 32)
        tweakXRatio = tweakX / (size * at)
        inputTweakX.value = tweakXRatio.toString(10)
        requestAnimationFrame(redraw)
    })
    decrTweakX.addEventListener("click", () => {
        let size = parseFloat(inputSize.value)
        let at = getResolution()
        let tweakXRatio = parseFloat(inputTweakX.value)
        let tweakX = size * at * tweakXRatio
        tweakX = Math.max(Math.ceil(tweakX) - 1, -at * 32)
        tweakXRatio = tweakX / (size * at)
        inputTweakX.value = tweakXRatio.toString(10)
        requestAnimationFrame(redraw)
    })

    incrTweakY.addEventListener("click", () => {
        let size = parseFloat(inputSize.value)
        let at = getResolution()
        let tweakYRatio = parseFloat(inputTweakY.value)
        let tweakY = size * at * tweakYRatio
        tweakY = Math.min(Math.floor(tweakY) + 1, at * 32)
        tweakYRatio = tweakY / (size * at)
        inputTweakY.value = tweakYRatio.toString(10)
        requestAnimationFrame(redraw)
    })
    decrTweakY.addEventListener("click", () => {
        let size = parseFloat(inputSize.value)
        let at = getResolution()
        let tweakYRatio = parseFloat(inputTweakY.value)
        let tweakY = size * at * tweakYRatio
        tweakY = Math.max(Math.ceil(tweakY) - 1, -at * 32)
        tweakYRatio = tweakY / (size * at)
        inputTweakY.value = tweakYRatio.toString(10)
        requestAnimationFrame(redraw)
    })

    function getResolution() {
        if (inputResolution.value === "1x") {
            return 1
        } else if (inputResolution.value === "2x") {
            return 2
        } else {
            return 4
        }
    }

    incrResolution.addEventListener("click", () => {
        if (inputResolution.value === "1x") {
            inputResolution.value = "2x"
        } else {
            inputResolution.value = "4x"
        }
        requestAnimationFrame(redraw)
    })

    decrResolution.addEventListener("click", () => {
        if (inputResolution.value === "4x") {
            inputResolution.value = "2x"
        } else {
            inputResolution.value = "1x"
        }
        requestAnimationFrame(redraw)
    })

    function updateTextureHeight(width) {
        let height = parseFloat(inputTextureHeight.value);
        if (height <= 0) {
            width = 0;
        }
        inputTextureHeight.value = width.toString(10);
    }

    incrTextureWidth.addEventListener("click", () => {
        let width = parseFloat(inputTextureWidth.value)
        let newWidth = 1
        while (newWidth <= width) {
            newWidth *= 2
        }
        width = Math.min(newWidth, 4096)
        inputTextureWidth.value = width.toString(10)
        updateTextureHeight(width);
        updateSpecTextField();
    })
    decrTextureWidth.addEventListener("click", () => {
        let width = parseFloat(inputTextureWidth.value)
        let newWidth = 1
        while (newWidth <= width) {
            newWidth *= 2
        }
        while (newWidth > 1 && newWidth >= width) {
            newWidth /= 2
        }
        width = Math.max(newWidth, 16)
        inputTextureWidth.value = width.toString(10)
        updateTextureHeight(width);
        updateSpecTextField();
    })

    toggleTextureHeight.addEventListener("click", () => {
        let height = parseFloat(inputTextureHeight.value);
        if (height <= 0) {
            height = parseFloat(inputTextureWidth.value);
        } else {
            height = 0;
        }
        inputTextureHeight.value = height.toString(10);
        updateSpecTextField();
    });

    function updateMipmapAbility(padding) {
        let mipmapAbility = parseFloat(inputMipmapAbility.value);
        if (mipmapAbility <= 0) {
            padding = 0;
        }
        inputMipmapAbility.value = padding.toString(10);
    }

    incrSpritePadding.addEventListener("click", () => {
        let padding = parseFloat(inputSpritePadding.value)
        let newPadding = 1
        while (newPadding <= padding) {
            newPadding *= 2
        }
        padding = Math.min(newPadding, 256)
        inputSpritePadding.value = padding.toString(10)
        updateMipmapAbility(padding);
        updateSpecTextField();
    })
    decrSpritePadding.addEventListener("click", () => {
        let padding = parseFloat(inputSpritePadding.value)
        let newPadding = 1
        while (newPadding <= padding) {
            newPadding *= 2
        }
        while (newPadding >= 1 && newPadding >= padding) {
            newPadding /= 2
        }
        if (newPadding < 1) {
            newPadding = 0
        }
        padding = Math.max(newPadding, 0)
        inputSpritePadding.value = padding.toString(10)
        updateMipmapAbility(padding);
    })

    toggleMipmapAbility.addEventListener("click", () => {
        let mipmapAbility = parseFloat(inputMipmapAbility.value);
        if (mipmapAbility <= 0) {
            mipmapAbility = parseFloat(inputSpritePadding.value);
            if (mipmapAbility <= 0) {
                inputSpritePadding.value = "8";
                mipmapAbility = 8;
            }
        } else {
            mipmapAbility = 0;
        }
        inputMipmapAbility.value = mipmapAbility.toString(10);
        updateSpecTextField();
    });

    iconSetSpecTextArea.addEventListener("input", () => {
        updateSpecInputFields();
    })

    // attach generic event listeners
    inputs.forEach(
        (element) => {
            element.addEventListener("input", () => {
                requestAnimationFrame(redraw);
            })
        }
    )

    // attach generic event listeners
    textureInputs.forEach(
        (element) => {
            element.addEventListener("input", () => {
                updateSpecTextField();
            })
        }
    )
    swapCanvasColorButton1.addEventListener("click", () => {
        [inputCanvasColor1.value, inputCanvasColor2.value] = [inputCanvasColor2.value, inputCanvasColor1.value]
        redrawBackdrop()
        requestAnimationFrame(redraw)
    })
    swapCanvasColorButton2.addEventListener("click", () => {
        [inputCanvasColor1.value, inputCanvasColor2.value] = [inputCanvasColor2.value, inputCanvasColor1.value]
        redrawBackdrop()
        requestAnimationFrame(redraw)
    })

    // use query parameters to populate form
    inputDecimal.value = ''
    inputs.forEach((element) => {
        if (element.type == "checkbox") {
            element.checked = (getParameterByName(element.getAttribute('data-q'), "on") == "on")
        } else {
            element.value = getParameterByName(element.getAttribute('data-q'), element.value)
        }
    })

    updateFont(getParameterByName('u'))
    updateSpecTextField()
</script>
</html>
